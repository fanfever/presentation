# 2017: Year in Review & Look Ahead

张帆

---

# CRM

1. 完成产品需求19个，延期最长在3天

2. 发现BUG数量累计36个

业务需求理解不深刻，自测时间过短，代码质量不高

---

## 数据情况

|接入公司|开通时间|坐席数|1月|2月|3月|4月|
|-------|------|-----|--|--|--|--|
|udesk|-|-|2058|2277|2901|1352|
|盈家生活|20161229|15|3|0|0|0|
|东方龙商务|20170109|50|2|0|425|159|
|兜行|20170320|5|0|0|42|770|
|浩然健康|20170414|15|0|0|0|7211|

---

### DONE:

* 公海规则及触发规则
  * 公海可以单独设置领取回收规则以及自建线索的单独规则，可以根据未跟进天数等条件设置自动进行回收
  * 创建编辑或定时触发，根据不同过滤条件执行不同通知，更改字段等不同事件
* 技术点
  * 采用drools规则引擎，将业务决策规则从应用中抽离至文件达到解耦，涉及到drl脚本文件的编写
  * DTO对象的比较，及高级公式的语法树分析从而进行校验及转化查询语句
  * 未实现关联对象的条件过滤，需要设置ES的父子关联关系
  
---

* 公告消息通知提醒
  * 针对一些业务场景进行消息的客户端推送
* 技术点
  * 单独部署SSE service进行消息推送
  * 集群，没有完善客户端数量限制，后期替换为ejabberd
  
---

* 自定义业务类型
  * 不同租户可创建不同业务模版，模版与自定义字段关联，可以依据不同部门进行适用
* 技术点
  * 产品规划稍许颠倒，导致重构及返工
  
---

### TODO:

* 邮件
* 通话组件

---

# KM

### DONE:

* 类似salesforce的权限体系一期，实现用户角色权限集岗位的基础架构
* 空间目录文章的编辑保存及全文搜索

---

### TODO:

* 通知，排序

---

# Service Go

* [数据建模](/Users/fanfever/Desktop/caseCustomObjectER.png)
* 自定义对象及自定义字段的实现
* 权限

---

### TODO:

* 自定义多类型支持
* 工作流程

---

### 不足

1. 问题：需求理解不完善，没有很好的思考后再动手，导致不断返工
  * 解决：遵循约定规范，产品提前给出需求-预览思考-产品讲解及互动-思考-开发
2. 问题：代码质量不高，隐患较多
  * 解决：逐步完善开发规范，适当review(Sonar)，集成测试（Spring Test Context framework, cucumber）
3. 问题：视角不足，通用型不高，导致重复造轮子
  * 解决：提取公用组件，抽取独立项目
  
---

# End

Thanks
